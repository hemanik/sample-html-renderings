<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Location Strategies - Graphene 2</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Location Strategies - Graphene 2</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>It is a way to wire-up your tests with the elements from the tested page.
Graphene indeed supports a <code>@FindBy</code> mechanism, well-known from
<a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/FindBy.html">WebDriver</a>
project. That means support for e.g. <code>css</code>, <code>id</code>, <code>tagName</code> and other
default location strategies. Graphene adds some goodies to this
mechanism, check out <a href="#findby-annotation">FindBy annotation</a> for more
info.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>id <span style="color: #990000">=</span> <span style="color: #FF0000">"htmlIdOfTheElement"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> yourElement<span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>However, it lacks support for custom location strategies. Graphene comes
with ability to extend it, and at the same time provides an actual
extension: <code>@FindByJQuery</code> <a href="#jquery-locating-strategy">annotation</a>, which brings
JQuery selectors to your tests.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="extending-the-location-strategy">Extending The Location Strategy</h2>
<div class="sectionbody">
<div class="paragraph"><p>To introduce our own strategy, lets say for angular.js, one needs to simply:</p></div>
<div class="sect2">
<h3 id="extend-by-class">Extend By Class</h3>
<div class="paragraph"><p>Be inspired with
<a href="https://github.com/arquillian/arquillian-graphene/blob/master/api/src/main/java/org/jboss/arquillian/graphene/findby/ByJQuery.java">ByJQuery</a>
class.</p></div>
</div>
<div class="sect2">
<h3 id="implement-locationstrategy-interface">Implement LocationStrategy Interface</h3>
<div class="paragraph"><p>An implementation can look like following snippet:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">static</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">AngularLocationStrategy</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> LocationStrategy <span style="color: #FF0000">{</span>

        @Override
        <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">ByAngular</span> <span style="font-weight: bold"><span style="color: #000000">fromAnnotation</span></span><span style="color: #990000">(</span><span style="color: #008080">Annotation</span> annotation<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
            <span style="color: #008080">FindByAngular</span> findBy <span style="color: #990000">=</span> <span style="color: #990000">(</span>FindByAngular<span style="color: #990000">)</span> annotation<span style="color: #990000">;</span>
            <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">ByAngular</span></span><span style="color: #990000">(</span>findBy<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">value</span></span><span style="color: #990000">());</span>
        <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="introduce-e.g.-findbyangular-annotation">Introduce e.g. @FindByAngular Annotation</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">Retention</span></span><span style="color: #990000">(</span>RetentionPolicy<span style="color: #990000">.</span>RUNTIME<span style="color: #990000">)</span>
@<span style="font-weight: bold"><span style="color: #000000">Target</span></span><span style="color: #990000">(</span>ElementType<span style="color: #990000">.</span>FIELD<span style="color: #990000">)</span>
@<span style="font-weight: bold"><span style="color: #000000">ImplementsLocationStrategy</span></span><span style="color: #990000">(</span>ByAngular<span style="color: #990000">.</span>AngularLocationStrategy<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">class</span></span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> @<span style="font-weight: bold"><span style="color: #0000FF">interface</span></span> <span style="color: #008080">FindByAngular</span> <span style="color: #FF0000">{</span>

    <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">value</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="use-it-in-the-tests">Use It In The Tests</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">FindByAngular</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"modelProperty"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> foo<span style="color: #990000">;</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="delegate-to-webelement">Delegate to WebElement</h2>
<div class="sectionbody">
<div class="paragraph"><p>It is easy to add all <code>WebElement</code> methods to your custom page fragment,
because Graphene supports delegate pattern.</p></div>
<div class="sect2">
<h3 id="basic-usage">Basic Usage</h3>
<div class="paragraph"><p>Suppose following page fragment, which implements <code>WebElement</code>.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>jboss<span style="color: #990000">.</span>arquillian<span style="color: #990000">.</span>graphene<span style="color: #990000">.</span>fragment<span style="color: #990000">.</span>Root<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>openqa<span style="color: #990000">.</span>selenium<span style="color: #990000">.</span>WebElement<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">abstract</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">MyInputFragment</span> <span style="font-weight: bold"><span style="color: #0000FF">implements</span></span> WebElement <span style="color: #FF0000">{</span>

    @Root
    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> input<span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getInputText</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getAttribute</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"value"</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #008080">String</span> <span style="font-weight: bold"><span style="color: #000000">getStyleClass</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getAttribute</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"class"</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Graphene will ensure that you can call on such a page fragment all
<code>WebElement</code> and all your custom methods.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>openqa<span style="color: #990000">.</span>selenium<span style="color: #990000">.</span>support<span style="color: #990000">.</span>FindBy<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>openqa<span style="color: #990000">.</span>selenium<span style="color: #990000">.</span>WebDriver<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>junit<span style="color: #990000">.</span>Test<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>junit<span style="color: #990000">.</span>runner<span style="color: #990000">.</span>RunWith<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>jboss<span style="color: #990000">.</span>arquillian<span style="color: #990000">.</span>junit<span style="color: #990000">.</span>Arquillian<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>jboss<span style="color: #990000">.</span>arquillian<span style="color: #990000">.</span>container<span style="color: #990000">.</span>test<span style="color: #990000">.</span>api<span style="color: #990000">.</span>RunAsClient<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>jboss<span style="color: #990000">.</span>arquillian<span style="color: #990000">.</span>drone<span style="color: #990000">.</span>api<span style="color: #990000">.</span>annotation<span style="color: #990000">.</span>Drone<span style="color: #990000">;</span>

@<span style="font-weight: bold"><span style="color: #000000">RunWith</span></span><span style="color: #990000">(</span>Arquillian<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #0000FF">class</span></span><span style="color: #990000">)</span>
@RunAsClient
<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">Test</span> <span style="color: #FF0000">{</span>

    @Drone
    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebDriver</span> browser<span style="color: #990000">;</span>

    @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>css <span style="color: #990000">=</span> <span style="color: #FF0000">".foo-bar"</span><span style="color: #990000">)</span>
    <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MyInputFragment</span> input<span style="color: #990000">;</span>

    @Test
    <span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="color: #009900">void</span> <span style="font-weight: bold"><span style="color: #000000">testPageFragmentMethodIsDelegatingCorrectly</span></span><span style="color: #990000">()</span> <span style="color: #FF0000">{</span>
        <span style="font-style: italic"><span style="color: #9A1900">//page loading, etc.</span></span>

        <span style="font-style: italic"><span style="color: #9A1900">//WebDriver methods</span></span>
        input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">sendKeys</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Graphene rulez!"</span><span style="color: #990000">);</span>

        <span style="font-style: italic"><span style="color: #9A1900">//Custom fragment methods</span></span>
        <span style="color: #008080">String</span> value <span style="color: #990000">=</span> input<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">getInputText</span></span><span style="color: #990000">();</span>
    <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="findby-annotation">FindBy annotation</h2>
<div class="sectionbody">
<div class="paragraph"><p>Graphene comes with support for Selenium 2, <code>@FindBy</code>
<a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/FindBy.html">annotation</a>,
which can be used to locate your elements in your
<a href="#page-abstractions#page-objects">Page Objects</a>,Â <a href="#page-abstractions#page-fragments">Page Fragments</a> and in tests as well.</p></div>
<div class="sect2">
<h3 id="basic-usage-1">Basic Usage</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>openqa<span style="color: #990000">.</span>selenium<span style="color: #990000">.</span>support<span style="color: #990000">.</span>FindBy<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">public</span></span> <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> <span style="color: #008080">TestClassOrPageObjectOrPageFragment</span> <span style="color: #FF0000">{</span>

  @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>id <span style="color: #990000">=</span> <span style="color: #FF0000">"myButton"</span><span style="color: #990000">)</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> button<span style="color: #990000">;</span>

  @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>className <span style="color: #990000">=</span> <span style="color: #FF0000">"foo-bar"</span><span style="color: #990000">)</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">MyPageFragmentImpl</span> myFragment<span style="color: #990000">;</span>

  @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>css <span style="color: #990000">=</span> <span style="color: #FF0000">".blah-class"</span><span style="color: #990000">)</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">List&lt;WebElement&gt;</span> myListOfWebElements<span style="color: #990000">;</span>

  @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>css <span style="color: #990000">=</span> <span style="color: #FF0000">".foo-bar"</span><span style="color: #990000">)</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">List&lt;MyPageFragmentImpl&gt;</span> myListOfPageFragments<span style="color: #990000">;</span>

  @<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>id <span style="color: #990000">=</span> <span style="color: #FF0000">"select"</span><span style="color: #990000">)</span>
  <span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">Select</span> select<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>As you can see, the <code>@FindBy</code> annotation usage is pretty the same as
with the Selenium 2.</p></div>
<div class="paragraph"><p>Graphene allows you to annotate these fields:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>WebElement</code>,
</p>
</li>
<li>
<p>
Page Fragment,
</p>
</li>
<li>
<p>
list of <code>WebElements</code>,
</p>
</li>
<li>
<p>
list of Page Fragments,
</p>
</li>
<li>
<p>
and also any <code>WebElement</code> wrappers, such as
<code>org.openqa.selenium.support.ui.Select</code>
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">No need to initialize those fields with any Page Factory. Graphene will
do so for you automatically.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Graphene supports also the <code>@FindBy's</code> annotation and the <code>How</code> usage.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="default-locating-strategy-for-locating-elements-with-empty-findby">Default Locating Strategy For Locating Elements With Empty @FindBy</h3>
<div class="paragraph"><p>You can often find this pattern in your tests when locating elements
with use of <code>@FindBy</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>id <span style="color: #990000">=</span> <span style="color: #FF0000">"loginButton"</span><span style="color: #990000">)</span>
<span style="color: #008080">WebElement</span> loginButton<span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>When using <code>@FindBy</code> annotation with Graphene, the following is equal to
the above:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@FindBy
<span style="color: #008080">WebElement</span> loginButton<span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>Graphene by default automatically infers the element by using
<code>ByIdOrName</code> location strategy and the field name as the locator.<br />
It can be configured with the <code>defaultElementLocatingStrategy</code> property
in arquillian.xml. The possible values are the lowercase values of
<a href="http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/support/How.html">How</a>
enum.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jquery-locating-strategy">JQuery Locating Strategy</h2>
<div class="sectionbody">
<div class="paragraph"><p>You can leverage <a href="http://api.jquery.com/category/selectors">JQuery
Selectors</a> API to locate your elements.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">import</span></span> org<span style="color: #990000">.</span>jboss<span style="color: #990000">.</span>arquillian<span style="color: #990000">.</span>graphene<span style="color: #990000">.</span>findby<span style="color: #990000">.</span>FindByJQuery<span style="color: #990000">;</span>

@<span style="font-weight: bold"><span style="color: #000000">FindByJQuery</span></span><span style="color: #990000">(</span><span style="color: #FF0000">".foo-class:eq(0)"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> customElement<span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>The above code will locate the the first element with the class
<em>'foo-class'</em>.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">This locating strategy requires JQuery to be installed to the page.
Graphene installs it in a no conflict way automatically if it is needed
(jquery locating strategy is used and it has not been installed yet).
Note that it can have small performance impact, because the installation
of the JQuery library can take some time. Therefore, locating by <em>id</em>,
<em>css</em>, or <em>className</em> is preferred if possible or when you care about
that 1 sec which it takes usually.</td>
</tr></table>
</div>
<div class="sect2">
<h3 id="inferring-the-element-from-the-root-of-the-document">Inferring The Element From The Root Of The Document</h3>
<div class="paragraph"><p>Sometimes it is handy to locate your elements which are inferred from
the root of the document. It can be especially used in Page Fragments,
where all defined <code>@FindBy</code> and the <code>@FindByJQuery</code> annotations are
inferred from the root of that Page Fragment.</p></div>
<div class="paragraph"><p>To infer them from the root of the document just start their locators
with <strong>html</strong>, <strong>head</strong>, or <strong>body</strong> expression. For example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">FindByJQuery</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"body div:visible"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> firstVisibleDiv<span style="color: #990000">;</span></tt></pre></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="grapheneelement">GrapheneElement</h2>
<div class="sectionbody">
<div class="paragraph"><p>To extend <code>WebElement</code> interface with some methods, Graphene comes with
its <code>GrapheneElement</code> implementation.</p></div>
<div class="paragraph"><p>It supports all <code>WebElement</code> methods, and currently adds only support
for <code>boolean isPresent()</code> method.</p></div>
<div class="paragraph"><p><code>GrapheneElement</code> can be used in the same places as <code>WebElement</code>.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>tagName <span style="color: #990000">=</span> <span style="color: #FF0000">"input"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">GrapheneElement</span> button<span style="color: #990000">;</span></tt></pre></div></div>
</div>
</div>
<div class="sect1">
<h2 id="inframe-annotation">InFrame Annotation</h2>
<div class="sectionbody">
<div class="paragraph"><p>To facilitate the
<a href="https://code.google.com/p/selenium/wiki/FrequentlyAskedQuestions#Q:_How_do_I_type_into_a_contentEditable_iframe?">tedious
process</a> of switching to and from a particular frame/iframe you can now
just use the @InFrame annotation to specify in which frame the element
should be located. The details are handled by Graphene.</p></div>
<div class="sect2">
<h3 id="usage">Usage</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>@Page
@<span style="font-weight: bold"><span style="color: #000000">InFrame</span></span><span style="color: #990000">(</span>index <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">PageObject</span> page<span style="color: #990000">;</span>

@<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>id <span style="color: #990000">=</span> <span style="color: #FF0000">"foo-bar"</span><span style="color: #990000">)</span>
@<span style="font-weight: bold"><span style="color: #000000">InFrame</span></span><span style="color: #990000">(</span>nameOrId <span style="color: #990000">=</span> <span style="color: #FF0000">"second"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">PageFragment</span> myFragment<span style="color: #990000">;</span>

@<span style="font-weight: bold"><span style="color: #000000">FindBy</span></span><span style="color: #990000">(</span>tagName <span style="color: #990000">=</span> <span style="color: #FF0000">"div"</span><span style="color: #990000">)</span>
@<span style="font-weight: bold"><span style="color: #000000">InFrame</span></span><span style="color: #990000">(</span>index <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">private</span></span> <span style="color: #008080">WebElement</span> plainWebElement<span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>You can determine the iframe/frame by its index (zero based), or by
<code>nameOrId</code> strategy. Graphene will automatically switch to a particular
iframe/frame when a method is invoked on such annotated field.</p></div>
<div class="paragraph"><p>When using <code>@InFrame</code> together with Page Object, all elements declared
in such Page Object will be treated as they are annotated with the same
<code>@InFrame</code>.</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-14 17:26:58 IST
</div>
</div>
</body>
</html>
