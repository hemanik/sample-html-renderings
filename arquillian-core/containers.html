<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>Containers</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Containers</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Arquillian&#8217;s forte is not only its ease of use, but also its
extensibility. Good integration testing is not just about testing in
<em>any</em> environment, but rather testing in the environment of your
application targets. It&#8217;s easy to give ourselves false assurance by
validating components in a specialized testing container, or by using
mocks, only to realize that small variations and assumptions cause the
components to fail when the application is deployed to production. To make
tests count, you want to execute them in the target environment, or
container.</p></div>
<div class="paragraph"><p><em>So what is the container that Arquillian uses? Is it some proprietary testing
container that emulates the behavior of the technology (Java EE)?</em></p></div>
<div class="paragraph"><p>Nope!It&#8217;s pluggable. It can be your target runtime, such as JBoss AS,
GlassFish or Tomcat. Or it can even been an embedded container such as
OpenEJB, GlassFish Embedded or Weld SE. You can even use one container
for development and another for continuous integration.</p></div>
<div class="paragraph"><p>This portability is made possible by a RPC-style (or local, if
applicable) communication between the test runner and the container, a
real container. You can run the same test case against various
containers and you don&#8217;t get locked into a proprietary test environment.</p></div>
<div class="paragraph"><p>Arquillian recognizes three container interaction styles:</p></div>
<div class="ulist"><ul>
<li>
<p>
A <em>remote container</em> resides in a separate JVM from the test runner.
Arquillian binds to the container to deploy the test archive and invokes
tests via a remote protocol (e.g., Servlet, JMX).
</p>
</li>
<li>
<p>
A <em>managed container</em> is similar to a remote container, except its
lifecycle (startup/shutdown) is also managed by Arquillian.
</p>
</li>
<li>
<p>
An <em>embedded container</em> resides in the same JVM and is mostly likely
managed by Arquillian. Tests are executed via a local protocol for
containers without a web component and via a remote protocol for
containers with a web component. No need to fiddle with those Maven
plugins!
</p>
</li>
</ul></div>
<div class="paragraph"><p>A container is further classified by its capabilities:</p></div>
<div class="ulist"><ul>
<li>
<p>
Java EE application server (e.g., JBoss AS, GlassFish, WebLogic)
</p>
</li>
<li>
<p>
Servlet container (e.g., Tomcat, Jetty)
</p>
</li>
<li>
<p>
standalone bean container (e.g., OpenEJB, Weld SE)
</p>
</li>
<li>
<p>
OSGi container
</p>
</li>
</ul></div>
<div class="paragraph"><p>Arquillian can control a variety of containers out of the box. If the
container you are using isn&#8217;t supported, Arquillian provides an SPI that
allows you to introduce any additional container to the default
collection.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_container_selection">Container Selection</h2>
<div class="sectionbody">
<div class="paragraph"><p><em>How can a single Arquillian test be executed in different containers?
How does Arquillian decide which container to target? And how are both
remote and local invocations supported?</em></p></div>
<div class="paragraph"><p>The answers to these questions touch upon the extensibility of Arquillian.</p></div>
<div class="paragraph"><p><strong>Container selection occurs at runtime</strong>. Arquillian selects the target
container according to which container adapter is available on the
runtime classpath at the time the test is launched. Therefore, you must
include the container adapter as a test-scoped dependency that
corresponds to the container you want to target.</p></div>
<div class="paragraph"><p>Arquillian delegates to an SPI (Service Provider Interface) to handle
starting and stopping the server and deploying and undeploying archives.
In this case, the SPI is the interface
<code>org.jboss.arquillian.spi.client.DeployableContainer</code>. If you recall
from the getting started guide, we added an Arquillian container adapter
according to the target container we wanted to use. That library
contains an implementation of this interface, thus controlling how
Arquillian handles deployment.</p></div>
<div class="paragraph"><p>If you want to add support for another container in Arquillian, you need
to provide an implementation of the <code>DeployableContainer</code> interface.</p></div>
<div class="paragraph"><p>To switch to another container, you just change which container adapter
is on the classpath before running the test.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">You can only have one container adapter on the classpath at a time. The
execution of the test will be aborted if more than one adapter is
detected.</td>
</tr></table>
</div>
<div class="paragraph"><p>One way to swap the libraries on the classpath is to manually edit the
dependencies defined in the pom.xml each time. But that’s just tedious.
The recommended approach is to use Maven profiles.</p></div>
<div class="paragraph"><p>Maven profiles allow you to partition your dependencies into groups, one
group for each container adapter and its related artifacts. When running
the tests, you activate one of those groups, which in turn selects a
target container. The profile is activated either using either a
commandline flag (-P) or a preference in the IDE.</p></div>
<div class="paragraph"><p>The <a href="http://arquillian.org/getting_started/">Getting Started Guide</a>
explains how to setup and use Maven profiles for this purpose in more
detail.</p></div>
<div class="paragraph"><p>So far we&#8217;ve covered how a container adapter is selected. It&#8217;s also
possible to configure the container adapter, which we&#8217;ll look at next.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_container_configuration">Container Configuration</h2>
<div class="sectionbody">
<div class="paragraph"><p>We&#8217;ve covered how a container gets selected, but how does Arquillian
know how to locate or communicate with the container? That&#8217;s where
configuration comes in.</p></div>
<div class="paragraph"><p>You can come a long way with default values, but at some point you may
need to customize some of the container settings to fit your
environment. Let&#8217;s see how this can be done with Arquillian.</p></div>
<div class="paragraph"><p>Arquillian will look for configuration settings in a file named
<code>arquillian.xml</code> in the root of your classpath. If it exists it will be
auto loaded, else default values will be used. This file is not a
requirement.</p></div>
<div class="paragraph"><p>Let&#8217;s imagine that we&#8217;re working for the company <code>example.com</code> and in
our environment we have two servers; <code>test.example.com</code> and
<code>hudson.example.com</code>. <code>test.example.com</code> is the JBoss instance we use
for our integration tests and <code>hudson.example.com</code> is our continuous
integration server that we want to run our integration suite from. By
default, Arquillian will use localhost, so we need to tell it to use
<code>test.example.com</code> to run the tests. The JBoss AS container by default
use the Servlet protocol, so we have to override the default
configuration.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">&lt;?xml</span></span> <span style="color: #009900">version</span><span style="color: #990000">=</span><span style="color: #FF0000">"1.0"</span><span style="font-weight: bold"><span style="color: #000080">?&gt;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">&lt;arquillian</span></span> <span style="color: #009900">xmlns:xsi</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span style="color: #009900">xmlns</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://jboss.org/schema/arquillian"</span>
    <span style="color: #009900">xsi:schemaLocation</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://jboss.org/schema/arquillian http://www.jboss.org/schema/arquillian/arquillian_1_0.xsd"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>

    <span style="font-weight: bold"><span style="color: #0000FF">&lt;container</span></span> <span style="color: #009900">qualifier</span><span style="color: #990000">=</span><span style="color: #FF0000">"jbossas"</span> <span style="color: #009900">default</span><span style="color: #990000">=</span><span style="color: #FF0000">"true"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">&lt;configuration&gt;</span></span>
            <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"providerUrl"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>jnp://test.example.com:1099<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">&lt;/configuration&gt;</span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">&lt;protocol</span></span> <span style="color: #009900">type</span><span style="color: #990000">=</span><span style="color: #FF0000">"Servlet 3.0"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
            <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"host"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>test.example.com<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
            <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"port"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>8181<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">&lt;/protocol&gt;</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">&lt;/container&gt;</span></span>

<span style="font-weight: bold"><span style="color: #0000FF">&lt;/arquillian&gt;</span></span></tt></pre></div></div>
<div class="paragraph"><p>That should do it! Here we use the JBoss AS 6.0 Remote container which
default use the Servlet 3.0 protocol implementation. We override the
default Servlet configuration to say that the http requests for this
container can be executed over <code>test.example.com:8181</code>, but we also need
to configure the container so it knows where to deploy our archives. We
could for example have configured the Servlet protocol to communicate
with a Apache server in front of the JBoss AS Server if we wanted to.
Each container has different configuration options.</p></div>
<div class="paragraph"><p>For a complete overview of all the containers and their configuration
options, see the
<a href="https://docs.jboss.org/author/display/ARQ/Container+adapters">container
adapters</a> appendix.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_supported_containers">Supported Containers</h2>
<div class="sectionbody">
<div class="paragraph"><p>Please see the
<a href="https://docs.jboss.org/author/display/ARQ/Container+adapters">container
adapters</a> appendix for a list of supported containers, including details
for how to use and configure them.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_container_config_runtime_selection">Container Config Runtime Selection</h2>
<div class="sectionbody">
<div class="paragraph"><p>During execution of your Arquillian test-suite, you may have configured
one or more containers with which you need to execute the test suite.
This is usually configured with maven profiles, but in the case where
individual container options need to be specified at runtime to the
target container. This is where you will need to specify configurations
in your arquillian.xml file, and also activate those configurations
using Java system properties.</p></div>
<div class="sect2">
<h3 id="_example_arquillian_xml_with_two_container_configurations">Example arquillian.xml with two container configurations:</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">&lt;?xml</span></span> <span style="color: #009900">version</span><span style="color: #990000">=</span><span style="color: #FF0000">"1.0"</span> <span style="color: #009900">encoding</span><span style="color: #990000">=</span><span style="color: #FF0000">"UTF-8"</span> <span style="color: #009900">standalone</span><span style="color: #990000">=</span><span style="color: #FF0000">"yes"</span><span style="font-weight: bold"><span style="color: #000080">?&gt;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">&lt;arquillian</span></span> <span style="color: #009900">xmlns:xsi</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://www.w3.org/2001/XMLSchema-instance"</span>
   <span style="color: #009900">xmlns</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://jboss.org/schema/arquillian"</span>
   <span style="color: #009900">xsi:schemaLocation</span><span style="color: #990000">=</span><span style="color: #FF0000">"http://jboss.org/schema/arquillian http://jboss.org/schema/arquillian/arquillian_1_0.xsd"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>

   <span style="font-weight: bold"><span style="color: #0000FF">&lt;container</span></span> <span style="color: #009900">qualifier</span><span style="color: #990000">=</span><span style="color: #FF0000">"jbossas_managed"</span> <span style="color: #009900">default</span><span style="color: #990000">=</span><span style="color: #FF0000">"true"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;protocol</span></span> <span style="color: #009900">type</span><span style="color: #990000">=</span><span style="color: #FF0000">"Servlet 3.0"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
         <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"executionType"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>MANAGED<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;/protocol&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;configuration&gt;</span></span>
         <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"jbossHome"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>${project.baseDir}/target/jboss-as-7.1.1.Final/<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
         <span style="font-weight: bold"><span style="color: #0000FF">&lt;property</span></span> <span style="color: #009900">name</span><span style="color: #990000">=</span><span style="color: #FF0000">"allowConnectingToRunningServer"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>true<span style="font-weight: bold"><span style="color: #0000FF">&lt;/property&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;/configuration&gt;</span></span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;/container&gt;</span></span>
   
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;container</span></span> <span style="color: #009900">qualifier</span><span style="color: #990000">=</span><span style="color: #FF0000">"jetty"</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;configuration&gt;</span></span>
          <span style="font-weight: bold"><span style="color: #0000FF">&lt;more</span></span> <span style="color: #009900">configuration</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>...<span style="font-weight: bold"><span style="color: #0000FF">&lt;/more</span></span> <span style="color: #009900">configuration</span><span style="font-weight: bold"><span style="color: #0000FF">&gt;</span></span>
      <span style="font-weight: bold"><span style="color: #0000FF">&lt;/configuration&gt;</span></span>
   <span style="font-weight: bold"><span style="color: #0000FF">&lt;/container&gt;</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">&lt;/arquillian&gt;</span></span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_activating_a_configuration_via_the_command_line">Activating a configuration via the command line</h3>
<div class="paragraph"><p>The -Darquillian.launch system property is what controls arquillian.xml
configuration selection. If you are running tests from Eclipse or
directly from the command like, you should add the -D system property to
your launch configuration or command.</p></div>
</div>
<div class="sect2">
<h3 id="_activating_a_configuration_via_maven">Activating a configuration via Maven</h3>
<div class="paragraph"><p>These configurations may be activated in the maven profile using the
Surefire plugin configuration in your container&#8217;s maven profile to set
the <em>arquillian.launch</em> system property for test execution, as follows:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">&lt;profile&gt;</span></span>
         <span style="font-weight: bold"><span style="color: #0000FF">&lt;id&gt;</span></span>JBOSS_AS_MANAGED_7.X<span style="font-weight: bold"><span style="color: #0000FF">&lt;/id&gt;</span></span>
         <span style="font-weight: bold"><span style="color: #0000FF">&lt;build&gt;</span></span>
            <span style="font-weight: bold"><span style="color: #0000FF">&lt;plugins&gt;</span></span>
               <span style="font-weight: bold"><span style="color: #0000FF">&lt;plugin&gt;</span></span>
                  <span style="font-weight: bold"><span style="color: #0000FF">&lt;groupId&gt;</span></span>org.apache.maven.plugins<span style="font-weight: bold"><span style="color: #0000FF">&lt;/groupId&gt;</span></span>
                  <span style="font-weight: bold"><span style="color: #0000FF">&lt;artifactId&gt;</span></span>maven-surefire-plugin<span style="font-weight: bold"><span style="color: #0000FF">&lt;/artifactId&gt;</span></span>
                  <span style="font-weight: bold"><span style="color: #0000FF">&lt;configuration&gt;</span></span>
                     <span style="font-weight: bold"><span style="color: #0000FF">&lt;systemPropertyVariables&gt;</span></span>
                        <span style="font-weight: bold"><span style="color: #0000FF">&lt;arquillian.launch&gt;</span></span>jbossas_managed<span style="font-weight: bold"><span style="color: #0000FF">&lt;/arquillian.launch&gt;</span></span>
                     <span style="font-weight: bold"><span style="color: #0000FF">&lt;/systemPropertyVariables&gt;</span></span>
                  <span style="font-weight: bold"><span style="color: #0000FF">&lt;/configuration&gt;</span></span>
               <span style="font-weight: bold"><span style="color: #0000FF">&lt;/plugin&gt;</span></span>
  ...</tt></pre></div></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2017-03-14 21:16:30 IST
</div>
</div>
</body>
</html>
